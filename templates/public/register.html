{% load static %}
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="https://kit.fontawesome.com/1228ed801f.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://static.neshan.org/sdk/mapboxgl/v1.13.2/neshan-sdk/v1.0.8/index.css" />
<script src="https://static.neshan.org/sdk/mapboxgl/v1.13.2/neshan-sdk/v1.0.8/index.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/@majidh1/jalalidatepicker/dist/jalalidatepicker.min.css">
<script type="text/javascript" src="https://unpkg.com/@majidh1/jalalidatepicker/dist/jalalidatepicker.min.js"></script>

        <title>ثبت نام در باشگاه ورزشی حجاب</title>

    {% load bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}

    <style>

        	@font-face {
			font-family: BYekan;
  			font-style: normal;
  			font-weight: normal;
  			src: url("/static/fonts/BYekan.eot");/* IE9 Compat Modes */
			src: url("/static/fonts/BYekan.woff") format('woff'),
        		 url("/static/fonts/BYekan.woff") format('woff2'), /* Super Modern Browsers */
        		 url("/static/fonts/BYekan.ttf")  format('truetype') /* Safari, Android, iOS */
		}
           * {
            box-sizing: border-box
        }

        img {
            vertical-align: middle;
        }

        .logoHolder {
            width: 50px;
            position: absolute;
            left: 0;
            right: 0;
            margin-right: 55%;
            margin-top: 1%;
            z-index: 10 !important;
            direction: ltr;

        }

        .logo {
            width: 50px;
            height: 50px;
            border-radius: 25px;
            position: absolute;
            direction: ltr

        }

        .typography {
            position: absolute;
            margin-left: 60px;
            margin-top: 20%;
            color: black;
            font-size: 20px

        }


        .dropdown {
            position: relative;
            display: inline-block;
        }



        .dropdown:hover {
            display: block;

        }

        .dropdown-content a {
            color: black;
            padding: 5px 16px;
            font-size: 16px;
            text-decoration: none;
            display: block;
        }

        /* Change color of dropdown links on hover */
        .dropdown-content a:hover {
            background-color: #f1f1f1
        }


        html{
            min-height: 100%;
            position: relative;
            font-family: BYekan, serif !important;
        }

        body {
            direction: rtl;
            margin-bottom: 500px;

        }


        .col {
            width: 30%;
            height: 35px;
            margin-left: 5px;
            background-color: #E16539;
            border-color: transparent;
            border-radius: 5px;
            color: white;
            font-family: BYekan, serif !important;
            font-size: 10px;

        }


        .navbar.navbar-dark.bg-dark li a{
            color: #fff;
        }

          .navbar.navbar-dark.bg-dark a:hover{
              color: grey;
        }

       .nav.navbar-nav li a {
           color: #fff;
           text-decoration: none;
       }

        .nav.navbar-nav a:hover {
            color: grey;
        }

        .nav-pills > li > a.active {
            background-color: #E16539 !important;
        }

        footer{
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            background: #303030;

        }

        .img-seo{
            width: 45%;
            float: right;
        }


        .map{
            height: 100% ;
            width: 20% ;
            margin-right: 40%
        }

        .footer-container{
            height: 250px;
        }

        .footer-logo{
            height: 100%;
            float: left;
        }

         ul {
            list-style-type: none;
        }

        footer ul li {
            margin-top: 30px;
        }

         .fa-eye{
            position: absolute;
            margin-top: -40px;
            margin-left: 50px;
            left: 0;
            cursor: pointer;
            color: rgb(51, 49, 49);
        }

           @media screen and (max-width: 600px) {
            .copy{
                font-size: 12px;
        }
               .navbar-left.nav-pills{
                   position: absolute;
                   left: 0;
                   margin-top: 5%;
               }

               .img-seo{
                   width: 100%;

        }

               .container{
                   width: 100% ;
        }

               .map{
                   height: 200px;
                   width: 200px;
                   margin-top: 50px;
                   margin-right: 30%;
''
               }
               body{
                   margin-bottom: 800px;
               }

               .footer-container{
                   height: 600px;
               }

               .footer-logo{
                   float: none;
                   height: 200px;
                   margin-right: 30%;
               }

               footer ul li {
                   margin-top: 10px;
               }
                .fa-eye{
                    margin-top: 30px;
        }

        }

        ::-webkit-scrollbar{
            overflow-y: hidden;
        }

input[type=text], input[type=password] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: transparent;
  background: lightgray;
  box-sizing: border-box;
}

button:hover {
  opacity: 0.8;
}

.container {
  padding: 16px;
}

</style>

</head>

<body>


<nav class="navbar navbar-dark bg-dark">
  <div class="container-fluid" style="vertical-align: center">
<ul class="nav nav-pills">
  <li class="nav-item">
    <a class="nav-link" aria-current="page" href='{% url 'home:home' %}'>صفحه اصلی</a>
  </li>
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">ورزش ها</a>
    <ul class="dropdown-menu dropdown-menu-right">
         {% for x in sport %}
             <li><a style="color: black ; width: 100% ; text-align: center" class="dropdown-item" href="{% url 'product:category' x.id %}">{{ x.title }}</a></li>
         {% endfor %}
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="{% url 'reservation:reservation' %}">اجاره سالن</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href='{% url 'about:aboutUs'%}'>درباره ما</a>
  </li>
</ul>
  <ul class="navbar-left nav-pills">
      <li class="nav-item"><a style="margin-right: 2px ; margin-left: 2px" class="nav-link active" href='{% url 'user:login' %}'>ورود و عضویت</a></li>
    </ul>
  </div>
</nav>

<div class="logoHolder">

    <img alt="" src="/media/{{ about.logo }}" class="logo">
    <div class="typography">PowerGrow</div>

</div>

  <div class="container py-5 h-100" style="margin-top: 100px">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-12 col-md-8 col-lg-6 col-xl-5">
        <div class="card bg-dark text-white" style="border-radius: 1rem">
          <div class="card-body p-5 text-center">
            <div class="mb-md-5 mt-md-4 pb-5">

              <h2 class="fw-bold mb-2 text-uppercase">ثبت نام</h2>
              <p class="text-white-50 mb-5">لطفا اطلاعات خود را وارد کنید</p>

              <div class="form-outline form-white mb-4">
                <input type="text" id="name" class="form-control form-control-lg" placeholder="نام و نام خانوادگی"  required/>
                <label class="form-label" for="name">نام و نام خانوادگی</label>
              </div>

                <div class="form-outline form-white mb-4">
                <input type="tel" id="phone" class="form-control form-control-lg" placeholder="9123456780" maxlength="10" required />
                <label class="form-label" for="phone">موبایل</label>
              </div>

                <div class="form-outline form-white mb-4">
                <input type="text" id="birthdate" class="form-control form-control-lg" placeholder="تاریخ تولد"  data-jdp required/>
                <label class="form-label" for="birthdate">تاریخ تولد</label>
              </div>

              <div class="form-outline form-white mb-4">
                  <input type="password" id="password1" autocomplete="new-password" class="form-control form-control-lg" placeholder="رمز عبور" style="-webkit-text-security: disc" minlength="6" required/>
                  <i id="eye" class="fa fa-eye"></i>
                  <label class="form-label" for="password1">رمز عبور</label>
              </div>

                <div class="form-outline form-white mb-4">
                  <input type="password" id="password2" autocomplete="new-password" class="form-control form-control-lg" placeholder="تکرار رمز عبور" style="-webkit-text-security: disc" minlength="6" required/>
                  <i id="eye" class="fa fa-eye"></i>
                  <label class="form-label" for="password2">تکرار رمز عبور</label>
              </div>

              <p class="small mb-5 pb-lg-2"><a class="text-white-50" href="{% url 'user:forget' %}">فراموشی رمز عبور ؟</a></p>

              <button id="submit" class="btn btn-outline-light btn-lg px-5" type="submit">ثبت نام</button>

            </div>

            <div>
              <p class="mb-0">اکانت دارید؟ <a href="{% url 'user:login' %}" class="text-white-50 fw-bold">وارد شوید</a>
              </p>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>


<footer>
       <div class="footer-container">

        <div class="footer-logo">

            <h3 style="color: white ; direction: ltr ; text-align: center ; margin-top: 20px">PowerGrow</h3>
            <img class="img-responsive" style="width: 200px ; height: 200px"  src="/media/{{ about.transparent_logo }}"
                 alt="">
        </div>

       <ul style="float: right">

       <li>
            <div style="display: inline-flex ; width: 350px ">

        <i class="fa-solid fa-location-dot"
           style="color: #ffffff; font-size: 30px"></i>
        <h5 style="color:white ; margin-right: 5px">

            {% autoescape off %}

                {{ about.address|linebreaksbr }}

            {% endautoescape %}

        </h5>

       </div>

       </li>


      <li>
       <div  style="display: inline-flex ; width: 350px" >
           <i class="fa-solid fa-phone-flip"
                   style="color: #ffffff; font-size: 30px"></i>
        <h5 style="color:white ; margin-right: 5px">
            {{ about.phone }}<br> {{ about.telephone }}
        </h5>

       </div>

       </li>

       <li>

            <div style="display: inline-flex ; width: 350px">

        <i class="fa-brands fa-instagram"
           style="color: #ffffff; font-size: 30px"></i>
        <h5 style="color:white ; margin-right: 5px">
            {{ about.instagram }}
        </h5>

       </div>

       </li>

       </ul>

        <div id="map" class="img-responsive map">
        </div>

    </div>

  <!-- Copyright -->
  <div class="p-3 copy" style="background: #151111 ; color: #B1B2B2; direction: ltr">&copy;<span id="year"
                                    style="font-family: Cambria, 'Hoefler Text', 'Liberation Serif', Times, 'Times New Roman', 'serif'">2023 </span><span> PhoenixFamily. All rights reserved.</span>
        <a href="//www.instagram.com/phoenixfamily.co?igshid=OGQ5ZDc2ODk2ZA=="
           style="right: 0 ; position: absolute ; margin-right:15px">
            <i class="fa-brands fa-instagram" style="color: #ffffff ; font-size: 30px"></i>
        </a>
        <a href="//www.linkedin.com/company/phoenixfamily" style="right: 0 ; position: absolute ; margin-right:55px">
            <i class="fa-brands fa-linkedin" style="color: #ffffff ; font-size: 30px"></i>
        </a>
        <span style="right: 0;margin-right: 90px; position: absolute">Follow us:</span>
    </div>
  <!-- Copyright -->
</footer>

</body>

<script>
    const passwordInput = document.getElementById("password")
    const eye = document.getElementById("eye")

    eye.addEventListener("click", function(){
  this.classList.toggle("fa-eye-slash")
  const type = passwordInput.getAttribute("type") === "password" ? "text" : "password"
  passwordInput.setAttribute("type", type)
})


</script>


<script>

    let lat = {{ about.latitude }};
    let long =     {{ about.longitude }};

    const map = new nmp_mapboxgl.Map({
        mapType: nmp_mapboxgl.Map.neshanVector,
        container: "map",
        zoom: 15,
        pitch: 0,
        center: [long, lat],
        minZoom: 2,
        maxZoom: 21,
        trackResize: false,
        mapKey: "web.3c30ab5c27a242d19aab4bca4e973288",
        poi: true,
        traffic: true,
        mapTypeControllerStatus: {
            show: false,
        }
    });
</script>


<script>

      jalaliDatepicker.startWatch({
        time: false,
    });


    const submit = document.getElementById('submit');
    const name = document.getElementById('name');
    const username = document.getElementById('phone');
    const birthdate = document.getElementById('birthdate');
    const pass1 = document.getElementById('password1');
    const pass2 = document.getElementById('password2');

    submit.addEventListener("click", async function (event) {
    if (pass1.value===pass2.value){

     const param = {
         "number": `+98${username.value}`,
         "password": pass1.value,
         "name": name.value,
         "birthdate": birthdate.value,
         "gender": "تعریف نشده",
        }

    const response = await fetch('api/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(param)
    });
    if (response.status===201){
        window.location.assign(('../verification/'+'+98'+username.value+'/').toString())
    }else {
        alert("نام کاربری قبلا ثبت نام شده است")
    }
    }
    else
        {
            alert("پسورد ها یکسان نیستند")
        }
});

</script>

</html>