<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://kit.fontawesome.com/f872c5c890.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://static.neshan.org/sdk/mapboxgl/v1.13.2/neshan-sdk/v1.0.8/index.css" />
<script src="https://static.neshan.org/sdk/mapboxgl/v1.13.2/neshan-sdk/v1.0.8/index.js"></script>

        <title>قراموشی رمز عبور باشگاه ورزشی حجاب</title>
    <style>

        	@font-face {
			font-family: BYekan;
  			font-style: normal;
  			font-weight: normal;
  			src: url("/static/fonts/BYekan.eot");/* IE9 Compat Modes */
			src: url("/static/fonts/BYekan.woff") format('woff'),
        		 url("/static/fonts/BYekan.woff") format('woff2'), /* Super Modern Browsers */
        		 url("/static/fonts/BYekan.ttf")  format('truetype') /* Safari, Android, iOS */
		}

            body {
                font-family: BYekan, serif !important;
                display: flex;
                flex-direction: column;
                background: #312f2e;
                color: #fff;
            }

            .logoHolder {
                width: 100%;
                margin-top: 20px;
                position: relative;
                display: inline-flex;
                direction: ltr;
                align-content: center;
                align-items: center;
                text-align: center;
                justify-content: center;
            }

        .logo {
            width: 50px;
            height: 50px;
            border-radius: 25px;

        }

        .typography {
            color: white;
            font-size: 20px;
            margin-left: 10px;

        }


.card {
    margin-top: 100px;
     background-color: #f7f0e8;
    color: #333;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
}

h3 {
    margin-bottom: 20px;
}

.btn-primary {
    background-color: #E16539;
    border: none;
}


</style>

</head>

<body>

<div class="logoHolder">

    <img alt="" src="/media/{{ about.logo }}" class="logo">
    <div class="typography">PowerGrow</div>

</div>

   <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card mt-5">
                    <div class="card-body text-center">
                        <h3>فراموشی رمز عبور</h3>
                        <p class="lead">فراموشی رمز عبور</p>
                        <p>شماره موبایل خود را وارد کنید</p>
                        <form>
                            <div class="form-group">
                                <input type="number" class="form-control" id="number" placeholder="Your e-mail address">
                            </div>
                            <button type="submit" class="btn btn-primary btn-block">بازیابی</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>


<script>

    const btn = document.getElementById("submit")

    const inputs = document.querySelectorAll(".otp-field label input");

    for (let i = 0; i < inputs.length; i++) {
        inputs[i].addEventListener('keydown', function(event) {
    if (event.key==="Backspace" ) {
      inputs[i].value='' ;
      if (i !==0) inputs[i - 1].focus();
    }
    else {
        if (event.keyCode> 47 && event.keyCode < 58) {
          inputs[i].value=event.key;
          if (i !==inputs.length - 1) inputs[i + 1].focus(); event.preventDefault();
        }
      else if (event.keyCode> 64 && event.keyCode < 91) {
          inputs[i].value=String.fromCharCode(event.keyCode);
          if (i !==inputs.length - 1) inputs[i + 1].focus(); event.preventDefault();
      }
    }
     if (i===inputs.length-1 && inputs[i].value !=='' ) {
          submit()
          return true
      }
        })
    }

    async function submit() {

        let code = "";
        for (let i = 0; i < inputs.length; i++) {
            code += inputs[i].value;
        }
        const response = await fetch('api/' + '+98' + code, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        });
        if (response.status === 200) {
            window.location.assign("../verification/" + '+98' + code)
        } else {
            alert("شماره وارد شده نامعتبر است")
            code = ''
            inputs.forEach((input) => {
                input.value = ''
            });
            inputs[0].select()
        }
    }

</script>

</html>